package view;
import java.awt.BorderLayout;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.InputStream;

import javax.swing.JFrame;
import javax.swing.SwingUtilities;

import view.Watcher;

import formatter.csv.CSVFormatter;


public class MainWindow extends JFrame {

	/**
	 * 
	 */
	private static final long serialVersionUID = -3880026026104218593L;
	
	PlanePanel plane;

	private ToolBoxPanel toolbox;
	
	public MainWindow(String[] args)
	{
		setLayout(new BorderLayout());
		plane = new PlanePanel();
		plane.SetFormatter(new CSVFormatter());
		
		toolbox = new ToolBoxPanel();
		toolbox.setController(plane);
		add(plane, BorderLayout.CENTER);
		add(toolbox, BorderLayout.EAST);
		
		setTitle("Geometry");
		setSize(1024, 768);
		setLocationRelativeTo(null);
		setDefaultCloseOperation(EXIT_ON_CLOSE);
		
		InputStream input = System.in;
		if(args.length == 1){
			try {
				input = new FileInputStream(args[0]);
			} catch (FileNotFoundException e) {
				e.printStackTrace();
			}
		}
		Watcher w = new Watcher(plane, new CSVFormatter(), input);
		Thread t = new Thread(w);
		t.start();
	}

	public static void main(final String[] args)
	{
		SwingUtilities.invokeLater(new Runnable() {
            public void run() {
            	MainWindow app = new MainWindow(args);
                app.setVisible(true);
            }
        });
	}
}
