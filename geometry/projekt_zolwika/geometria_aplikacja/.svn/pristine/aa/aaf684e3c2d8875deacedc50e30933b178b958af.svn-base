package view;

import java.io.BufferedInputStream;
import java.io.InputStream;

import model.Model;
import formatter.IFormatter;

public class Watcher implements Runnable {

	private IController control;
	private IFormatter form;
	private Model model;
	private InputStream input;

	public Watcher(IController c, IFormatter form, InputStream str){
		this.control = c;
		this.form = form;
		this.input = str;
	}

	@Override
	public void run() {
		try {
			BufferedInputStream bis = new BufferedInputStream(input);
			while(true){
				//System.out.println("waiting for entry...");
				//if(false)throw new InterruptedException();
				//do{
					Thread.sleep(1000);
				//}while(bis.available()<=0);
				this.model = form.getNextStep(bis, control.GetModel());
				control.Refresh(model);
			}
		} catch (InterruptedException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}
	
	
	
}
